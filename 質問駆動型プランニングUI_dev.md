# TaskSparkle UI要件定義書

## 1. 概要
### 1.1 目的
タスクに輝きを、未来にスピードを。
AIとの対話を中心としたタスク管理システムのUI設計仕様を定義する。

### 1.2 設計方針
- **常時チャット表示**: AIとの対話を最優先し、すべての操作で利用可能
- **モード分離**: Projects（階層管理）とToday（ダッシュボード）を明確に分離
- **1画面完結**: スクロール不要で全機能にアクセス可能
- **輝きとスピード**: タスクの「とっかかり」を楽にし、楽しく進められるUX

---

## 2. 画面構成

### 2.1 基本レイアウト
```
┌─────────────────────────────────────────────────┐
│ ヘッダー (固定)                                  │
├─────────────────────────────────────────────────┤
│                                                 │
│  メインビュー領域　　　　│ チャット領域（常時表示） │
│   (Projects/Today切替)  │　　　　　　　　　　　　 │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 2.2 レスポンシブ設計
- **最小幅**: 1280px
- **チャット領域**: 35-40% (最小400px)
- **メインビュー領域**: 60-65% (最小600px)
- **高さ**: 100vh固定（スクロール無し）

---

## 3. コンポーネント仕様

### 3.1 ヘッダー
#### 要素構成
- アプリケーション名: "TaskSparkle" (輝きのグラデーション効果)
- ビュー切替タブ: [Projects | Today]
- グローバルアクション: [+ 新規プロジェクト] [設定]

#### 機能
- タブクリックでメインビュー切替
- アクティブタブの視覚的強調

### 3.2 チャット領域（常時表示）
#### 要素構成
```
┌──────────────────────┐
│ 💬 AI Assistant      │
├──────────────────────┤
│ メッセージ履歴        │
│ - User: ...          │
│ - AI: ...            │
│ - [プロジェクトカード]│
│                      │
├──────────────────────┤
│ 入力欄               │
│ [メッセージ入力____] │
│ [送信] [音声] [添付] │
└──────────────────────┘
```

#### 機能要件
- **メッセージ履歴**: スクロール可能、最新を下部に表示
- **コンテキスト保持**: 現在のビューに関連した会話継続
- **インラインカード**: プロジェクト情報を会話内に埋め込み表示
- **ショートカット**: Cmd/Ctrl + Enter で送信

### 3.3 Projectsビュー
#### レイアウト
```
┌────────────────┬──────────────────────┐
│ プロジェクト    │ 詳細ビュー            │
│ リスト          │                      │
│                │ ▼ プロジェクト名       │
│ ● Webアプリ    │  ├─ ▼ マイルストーン  │
│ ○ 卒業論文    │  │   ├─ ☑ タスク1    │
│ ○ 副業案件    │  │   ├─ ☐ タスク2    │
│                │  │   │  ├─ ☐ サブ1  │
│ [+ 新規]       │  │   │  └─ ☐ サブ2  │
└────────────────┴──────────────────────┘
```

#### 機能要件
- **プロジェクトリスト**
  - 選択中のプロジェクトをハイライト
  - ドラッグで並び替え可能
  - プロジェクト毎の進捗率表示

- **詳細ビュー**
  - 最大4階層まで表示（プロジェクト/マイルストーン/タスク/サブタスク）
  - 折りたたみ/展開機能
  - インライン編集（ダブルクリック）
  - チェックボックスで完了管理
  - ドラッグ&ドロップで階層変更

- **コンテキストメニュー**
  - 右クリックで表示
  - 編集/削除/移動/複製

### 3.4 Todayビュー（ダッシュボード）
#### レイアウト
```
┌─────────────────────────────────┐
│ 📅 Today's Dashboard            │
├─────────────────────────────────┤
│ ▼ 本日のタスク                  │
│ ☐ [Web] API実装                 │
│ ☐ [卒論] 文献調査               │
│ ☑ [副業] 議事録作成             │
├─────────────────────────────────┤
│ 📊 進捗サマリー                  │
│ 完了: 1/3 | 進行中: 2            │
├─────────────────────────────────┤
│ 💡 AIからの提案                  │
│ ・優先度の高いタスク...          │
└─────────────────────────────────┘
```

#### 機能要件
- **タスクリスト**
  - プロジェクト横断で本日分を表示
  - プロジェクト名をタグ表示
  - ドラッグで順序変更
  - チェックで完了処理

- **進捗サマリー**
  - 本日/今週の完了率
  - プロジェクト別進捗グラフ

- **AI提案セクション**
  - 優先タスクのレコメンド
  - スケジュール最適化提案

---

## 4. インタラクション仕様

### 4.1 AI連携機能
#### チャットコマンド例
- `「Webアプリのタスクを表示」` → Projectsビューに切替&該当プロジェクト選択
- `「今日やることを整理」` → Todayビューに切替&タスク提案
- `「API実装を3つのサブタスクに分解」` → タスク自動生成

#### プロジェクトカード
- チャット内でプロジェクト情報を構造化表示
- カード内で直接編集操作可能
- 「詳細を見る」でProjectsビューへ遷移

### 4.2 キーボードショートカット
| キー | アクション |
|------|-----------|
| Cmd/Ctrl + K | クイック検索 |
| Cmd/Ctrl + P | プロジェクト切替 |
| Cmd/Ctrl + Enter | メッセージ送信 |
| Tab | フォーカス移動 |
| Space | タスクチェック切替 |
| Cmd/Ctrl + N | 新規作成 |

### 4.3 ドラッグ&ドロップ
- **タスク移動**: 階層間、プロジェクト間
- **優先順位変更**: リスト内での並び替え
- **Todayへの追加**: ProjectsからTodayビューへ

---

## 5. 状態管理

### 5.1 保存タイミング
- タスク状態変更: 即時保存
- テキスト編集: フォーカスアウト時
- 構造変更: 操作完了時

### 5.2 同期仕様
- ローカルストレージに一時保存
- バックエンドと30秒間隔で同期
- オフライン時はキューイング

---

## 6. UI/UXガイドライン

### 6.1 ビジュアルデザイン
- **カラースキーム (スターライト・ネイビー系)**: 
  - 基調色: ダークスレートブルー(#1F2937) - 背景、カードベース
  - ブランドカラー: インディゴ(#6366F1) - メインアクセント、リンク、選択状態
  - スパークルカラー: ライトバイオレット(#C4B5FD) - CTA、ホバー、完了エフェクト
  - 強調カラー: アンバー(#FCD34D) - 通知バッジ、アラート、重要マーカー
  - テキストカラー: ライトグレー(#D1D5DB) - 標準テキスト、ラベル
  - グラデーション: インディゴ→バイオレットで星空の輝きを表現
  - デザインコンセプト: 夜空の星々のような落ち着いた輝き
- **フォント**: システムフォント優先
- **アニメーション**: 
  - 200ms以内の軽快な遷移
  - Sparklesアイコンに星の瞬きアニメーション
  - タスク完了時にスターライトエフェクト(バイオレット→アンバーのグロー)

### 6.2 アクセシビリティ
- キーボードのみで全操作可能
- スクリーンリーダー対応
- 高コントラストモード

### 6.3 パフォーマンス
- 初期表示: 1秒以内
- ビュー切替: 200ms以内
- 検索結果: 300ms以内

---

## 7. 技術仕様

### 7.1 推奨技術スタック
- **フレームワーク**: React
- **状態管理**: Zustand
- **スタイリング**: Tailwind CSS/CSS Modules
- **アニメーション**: Framer Motion?/Vue Transitions?

### 7.2 ブラウザ対応
- Chrome/Edge 最新版
- Firefox 最新版
- Safari 14以上

---

## 8. 実装優先順位

### Phase 1（MVP）
1. 基本レイアウト構築
2. チャット機能実装
3. Projectsビューの基本機能
4. タスクのCRUD操作

### Phase 2
1. Todayビュー実装
2. ドラッグ&ドロップ
3. AI連携強化
4. キーボードショートカット

### Phase 3
1. 詳細なアニメーション
2. オフライン対応
3. パフォーマンス最適化
4. アクセシビリティ強化

---

## 9. 注意事項

### 9.1 制約事項
- 画面幅1280px未満は非対応（別途モバイル版検討）
- 同時編集は非対応（個人利用前提）
- ブラウザの戻る/進むボタンは使用しない（SPA）

### 9.2 セキュリティ
- XSS対策: ユーザー入力のサニタイズ
- CSRF対策: トークン実装
- 通信: HTTPS必須

---

## 更新履歴
- 2025/01/10: 「TaskSparkle」にリブランド、UIデザインを輝きのテーマに更新
- 2024/10/10: 初版作成